
#!/usr/bin/env python
import socket
import subprocess
import sys
from datetime import datetime


class PortScanner:
    def __init__(self, service):

        if (service == 'http'):
            port = 80
        elif (service == 'mysql'):
            port = 3306

        ipCount = 1
        while ipCount < 250:
            ipCount += 1  # Same as a = a + 1
            remote_server = '178.62.3.251.' + str(ipCount)
            try:
                remote_serverIP = socket.gethostbyname(remote_server)

                try:
                    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
                    sock.settimeout(2)
                    result = sock.connect_ex((remote_serverIP, port))
                    if result == 0:
                        print remote_server + " Port {}: 	 Open".format(port) + " " + service
                    else:
                        print remote_server + " Port {}: 	 Close".format(port) + " " + service
                    sock.close()

                except KeyboardInterrupt:
                    print "You pressed Ctrl+C"
                    sys.exit()

                except socket.gaierror:
                    print 'Hostname could not be resolved. Exiting'
                    sys.exit()

                except socket.error:
                    print "Couldn't connect to server"
                    sys.exit()
            except:
                print 'Not Alive'
